{"version":3,"sources":["../fable_main.fsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAsCI,OACI;AAAA,gCAAM;AAAA;AAAA,KAAN,EACI,8BADJ,EAEI,qBAAM;AAAA;AAAA,KAAN,EACI,qBAAM;AAAA;AAAA,KAAN,EACI,mCADJ,EAEI,4BAFJ,EAGI,kCAHJ,CADJ,CAFJ;AASC;AAGL,OAAyC;AAAA;AAAA;AAAA,yCAMrC;AAAA,mDAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA5C;AAAA;AACW,KAP0B,+CASrC;AAAmC,gEAAsC,UAAtC;AAAnC;AAAqF,KAThD,gDAWrC;AAAmC,wDAAqC,UAArC;;AAAnC;AAAoF,KAX/C,0CAajC;AAAmB,4DAA8B,oBAA9B;;AACY;;AAAnC;AADoB,KAbiB;AAAA;AAAA,gDAkBrC;AAA4B;AAA5B;AAAiD,KAlBZ;AAAA;AAAA,yDAsBrC;AAAA;AAAA;AACW,KAvB0B,sCAyBrC;AAAA;AAAA;AAAuC,KAzBF,sCA2BrC;AAAA;AAAA;AAAiC,KA3BI;AAAA;AAAA;AA2BJ;AAErC,OACI;AAAK;;AACT,QACI;AAAA;AAAA;AACE,KAFN,CAIO;AAAA;AAAA;AAAmD;AALpD;AAON,OACI;AACI,gDACqB,oBAAoB,2CAApB,CADrB,EAEkB,2BAAmD,6BAA6B,SAAC,4BAGZ,KAHY,6BAAD,EAU9B,4BAGmB,KAHnB,4BAV8B,EAA7B,CAAnD,CAFlB,EAsBW,SACC,UACiB,KADjB,EAEiB;AAAA;AAAA;AAAyB,KAAzB,EAFjB,gBADD,EAMC,UACiB,KADjB,EAEiB;AAAA;AAAA;AAAyB,KAAzB,EAFjB,iBAND,EAtBX;AAoCR,2DAAyD,wBAAzD;AAEiB;AACL,4BAAY;AAAA;AAAA;AAAA;AAAA,KAAZ;AACG,yCAAsB,cAAK;AAAA;AAAA,KAAL,EAAgB,EAAhB,CAAtB;AAAA;AAAA;AACf,qBAA0B,uCAA1B;AA1CqB;AA4CzB","file":"fable_main.js","sourcesContent":["#r \"node_modules/fable-core/Fable.Core.dll\"\n#r \"node_modules/fable-powerpack/Fable.PowerPack.dll\"\n#r \"node_modules/fable-react/Fable.React.dll\"\n#r \"node_modules/fable-redux/Fable.Redux.dll\"\n#r \"node_modules/fable-reactredux/Fable.ReactRedux.dll\"\n#r \"node_modules/fable-reduxthunk/Fable.ReduxThunk.dll\"\n#load \"node_modules/fable-import-fetch/Fable.Import.Fetch.fs\"\n#load \"node_modules/fable-import-fetch/Fable.Helpers.Fetch.fs\"\n#load \"fable_domainModel.fsx\"\nopen Fable_domainModel\n#load \"fable_Commands.fsx\"\nopen Commands\n#load \"fable_navigation.fsx\"\nopen Fable_navigation\n#load \"fable_map.fsx\"\nopen Fable_map\n#load \"fable_elevation.fsx\"\nopen Fable_elevation\n#load \"fable_toastNotifications.fsx\"\nopen Fable_toastNotifications\n#load \"fable_domainModelTests.fsx\"\nopen Fable_domainModelTests\n\n\nopen Fable.Core\nopen Fable.Import\nopen System\nopen Fable.Core.JsInterop\nopen Fable.Import.Fetch\nopen Fable.Helpers.Fetch\nopen Fable.Helpers.Redux\nopen Fable.Helpers.ReactRedux\n\nmodule R = Fable.Helpers.React\nopen R.Props\n// domain models\n\n\nlet createApp initialState =         \n        R.div [ ClassName \"site-wrapper\"] [ \n            createToastNotifications()\n            R.div [ ClassName \"site-wrapper-inner\"] [ \n                R.div [ ClassName \"cover-container\"] [                     \n                    createNavigationViewComponent()\n                    createMapViewComponent()\n                    createElevationViewComponent()\n                ]\n            ]            \n        ]\n\n\nlet reducer (domainModel: LocationTracker) = function\n    | BeginTracking identifer ->\n        domainModel\n    | StopTracking identifier -> \n        domainModel\n    | Observe identifier -> \n        domainModel.TrackingService.AddTrackingJob (domainModel.TrackingService.CreateTrackingJob identifier 0.0 0.0) |> ignore\n        domainModel        \n    | LoadTrackingPoints (beginDate, endDate, selectedTrack) -> \n        { domainModel with Visualization = new TrackVisualization(selectedTrack, List.Empty)}\n    | ClearTrackingPoints ->\n        { domainModel with Visualization = new TrackVisualization(String.Empty, List.Empty)}\n    | ReceivedTrack (trackName, trackingPoints) ->\n        let aggregatedPoints = TrackVisualization.calculate (List.ofArray trackingPoints)\n        { domainModel with Visualization = new TrackVisualization(trackName, aggregatedPoints)}\n    | LoadingTracks ->\n        domainModel        \n    | ReceivedTracks tracks ->\n        { domainModel with Tracks = List.ofArray tracks }\n    | ShowElevationMarker point ->\n        domainModel    \n    | ReceivedElevationPoints points ->\n        domainModel.Visualization.AssignElevationPoints points\n        domainModel\n    | ShowError error ->\n        { domainModel with Error = Some error }\n    | HideError ->\n        { domainModel with Error = None } \n\nlet reducerWithLocalStorage (domainModel: LocationTracker) command =\n    let dm = reducer domainModel command\n    try\n        Backend.saveLocationTracker dm\n        dm \n    with\n    | _ -> {dm with Error = Some \"error saving location data\"}      \n                                               \nlet start() = \n    let initialStoreState = \n            {\n                TrackingService= new TrackingService(new Backend.LocationService(Browser.window.location.origin)); \n                Visualization=new TrackVisualization(name=String.Empty, points = TrackVisualization.calculate [{\n                                                                                    latitude = 8.9\n                                                                                    longitude = 5.9\n                                                                                    timestamputc = DateTime.Now\n                                                                                    speed = 34.9\n                                                                                    distanceCovered = 0.0\n                                                                                    distance = 32300.9\n                                                                                    index = 0\n                                                                                    elevation = 320.3\n                                                                                };\n                                                                                {\n                                                                                    latitude = 9.9\n                                                                                    longitude = 5.9\n                                                                                    timestamputc = DateTime.Now\n                                                                                    speed = 34.9\n                                                                                    distanceCovered = 0.0\n                                                                                    distance = 32300.9\n                                                                                    index = 1\n                                                                                    elevation = 32.3\n                                                                                }]);\n                Tracks=[\n                        {                        \n                            mintimestamp=DateTime.Now;\n                            maxtimestamp=DateTime.Now.AddDays(1.0);\n                            name=\"first Track\"\n                        };\n                        {\n                            mintimestamp=DateTime.Now;\n                            maxtimestamp=DateTime.Now.AddDays(2.0);\n                            name=\"second Track\"\n                        }\n                       ];\n                Error = None\n            }\n    initialStoreState.Visualization.AssignElevationPoints [| {index = 0; elevation = 0.0;};|]\n   \n    let middleware = Redux.applyMiddleware ReduxThunk.middleware\n    let store = createStore reducerWithLocalStorage initialStoreState (Some middleware)\n    let provider = createProvider store (R.fn createApp (obj()) [])\n    ReactDom.render(provider, Browser.document.getElementsByClassName(\"main\").[0]) |> ignore\n\nstart()"]}